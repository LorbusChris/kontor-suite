FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZToga29udG9yLXN1aXRlCmltYWdlOiBkb2NrZXIuaW8vbG9yYnVzY29kZS9rb250b3Itc3Vp\
dGUKZGVzY3JpcHRpb246IEtvbnRvIGRpZ2l0YWwgY29tbXVuaWNhdGlvbnMgc3VpdGUKYmluZGFi\
bGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogS29udG9y\
IFN1aXRlIEFQQgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBkZWZh\
dWx0IG5vbi1IQSBwbGFuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxh\
eU5hbWU6IERlZmF1bHQKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogc2VydmljZV9hY2Nv\
dW50X3VzZXJvb3QKICAgICAgICBkZWZhdWx0OiB1c2Vyb290CiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IFNlcnZpY2UgYWNjb3VudCB0byB1c2UgZm9yIHJ1bm5pbmcgdGhlIHBv\
ZHMKICAgICAgICBkZXNjcmlwdGlvbjogSXQgaGFzIHRvIGFsbG93IHJ1bm5pbmcgY29udGFpbmVy\
cyBhcyByb290LCBlLmcuIG9jIGNyZWF0ZSBzZXJ2aWNlYWNjb3VudCB1c2Vyb290OyBvYyBhZG0g\
cG9saWN5IGFkZC1zY2MtdG8tdXNlciBhbnl1aWQgLXogdXNlcm9vdAogICAgICAtIG5hbWU6IGRv\
bWFpbgogICAgICAgIGRlZmF1bHQ6IGV4YW1wbGUuY29tCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgdGl0bGU6IERlcGxveW1lbnQgRG9tYWluCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgLSBuYW1lOiBpcGFfYWRtaW5fcGFzc3dvcmQKICAgICAgICBkZWZhdWx0OiBhZG1pbgogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBGcmVlSVBBIEFkbWluIFBhc3N3b3JkCiAg\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBpcGFfY2x1c3Rlcl9pcAogICAgICAg\
IGRlZmF1bHQ6ICcxNzIuMzAuMS4xMDAnCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0\
bGU6IEZyZWVJUEEgSW50ZXJuYWwgQ2x1c3RlciBJUAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgIC0gbmFtZTogaXBhX3RpbWVvdXQKICAgICAgICBkZWZhdWx0OiAnNjAwJwogICAgICAgICMg\
VE9ETzogVHlwZQogICAgICAgIHRpdGxlOiBGcmVlSVBBIFRpbWVvdXQgZm9yIFBvZHMgdG8gYmVj\
b21lIHJlYWR5IChpbiBzZWNvbmRzKQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFt\
ZTogaXBhX2hvc3RuYW1lCiAgICAgICAgZGVmYXVsdDogaXBhCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IEZyZWVJUEEgU2VydmVyIEhvc3RuYW1lCiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgLSBuYW1lOiBpcGFfc2VydmVyX2luc3RhbGxfb3B0cwogICAgICAgIGRlZmF1\
bHQ6ICctVSAtciBFWEFNUExFLlRFU1QgLS1zZXR1cC1kbnMgLS1uby1mb3J3YXJkZXJzIC0tbm8t\
bnRwJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBGcmVlSVBBIE9wdGlvbnMg\
cGFzc2VkIHRvIGlwYS1zZXJ2ZXItaW5zdGFsbAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
IC0gbmFtZTogaXBhX3ZvbHVtZV9jYXBhY2l0eQogICAgICAgIGRlZmF1bHQ6IDFHaQogICAgICAg\
IHRpdGxlOiBGcmVlSVBBIFZvbHVtZSBDYXBhY2l0eQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgIC0gbmFtZTogbWFpbF9ob3N0bmFtZQogICAgICAgIGRlZmF1bHQ6IG1haWwKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogU01UUC9JTUFQIEhvc3RuYW1lCiAgICAgICAgcmVx\
dWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBtZGFfdm9sdW1lX2NhcGFjaXR5CiAgICAgICAgZGVm\
YXVsdDogMTBHaQogICAgICAgIHRpdGxlOiBEb3ZlY290IE1haWwgU3RvcmFnZSBWb2x1bWUgQ2Fw\
YWNpdHkKICAgICAgICByZXF1aXJlZDoKICAgICAgLSBuYW1lOiBtZGFfY2x1c3Rlcl9pcAogICAg\
ICAgIGRlZmF1bHQ6ICcxNzIuMzAuMS4xMDEnCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IERvdmVjb3QgSW50ZXJuYWwgQ2x1c3RlciBJUAogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgIC0gbmFtZTogbXRhX2NsdXN0ZXJfaXAKICAgICAgICBkZWZhdWx0OiAnMTcyLjMwLjEu\
MTA0JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBQb3N0Zml4IEludGVybmFs\
IENsdXN0ZXIgSVAKICAgICAgICByZXF1aXJlZDogdHJ1ZQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
